<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Galería</title>
    <style>
        /* --- BASE --- */
        body { 
            margin: 0; padding: 0; background-color: #000; color: white; 
            font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100dvh; display: flex; flex-direction: column;
            user-select: none; -webkit-user-select: none;
        }

        /* --- UI SUPERIOR --- */
        .top-bar {
            position: absolute; top: 0; left: 0; width: 100%; height: 60px;
            background: rgba(0,0,0,0.5); /* Semitransparente */
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
            box-sizing: border-box; z-index: 20; backdrop-filter: blur(5px);
            transition: opacity 0.3s;
        }
        
        .project-title { font-weight: bold; color: #27ae60; text-transform: uppercase; font-size: 0.9rem; text-shadow: 1px 1px 2px black; }
        
        .close-btn { 
            background: rgba(192, 57, 43, 0.9); color: white; border: none; padding: 8px 15px; border-radius: 20px; 
            font-weight: bold; text-decoration: none; font-size: 0.8rem; 
        }

        /* --- PISTA DESLIZANTE (TRACK) --- */
        /* Aquí ocurre la magia del deslizamiento */
        .gallery-track {
            flex: 1;
            display: flex;
            overflow-x: auto; /* Permite deslizar */
            overflow-y: hidden;
            scroll-snap-type: x mandatory; /* Efecto imán */
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            z-index: 1;
            align-items: center;
        }

        /* CADA DIAPOSITIVA */
        .slide {
            flex: 0 0 100%; /* Ocupa el 100% del ancho */
            width: 100%;
            height: 100%;
            scroll-snap-align: center;
            scroll-snap-stop: always;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transform-origin: center center;
            transition: transform 0.2s ease-out; /* Zoom fluido */
            will-change: transform;
        }

        /* --- BOTONES DE NAVEGACIÓN (PC) --- */
        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 50px; height: 50px; border-radius: 50%;
            background: rgba(255,255,255,0.15); color: white;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; cursor: pointer; z-index: 10;
            transition: 0.2s; backdrop-filter: blur(2px);
        }
        .nav-btn:hover { background: rgba(39, 174, 96, 0.8); }
        .prev { left: 15px; }
        .next { right: 15px; }
        
        /* Ocultar flechas en móvil (se usa el dedo) */
        @media (max-width: 768px) { .nav-btn { display: none; } }

        /* --- BARRA INFERIOR --- */
        .bottom-bar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 80px;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center; gap: 20px;
            z-index: 20; transition: opacity 0.3s;
        }

        .zoom-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white;
            width: 45px; height: 45px; border-radius: 50%; font-size: 1.5rem;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
        }
        .zoom-btn:active { background: #27ae60; border-color: #27ae60; }

        /* INDICADOR DE PÁGINA (PUNTITOS) */
        .pagination {
            position: absolute; bottom: 90px; left: 0; width: 100%;
            display: flex; justify-content: center; gap: 6px; pointer-events: none; z-index: 15;
        }
        .dot {
            width: 6px; height: 6px; background: rgba(255,255,255,0.3); border-radius: 50%; transition: 0.3s;
        }
        .dot.active { background: #27ae60; transform: scale(1.5); }

        /* --- PROTECCIÓN --- */
        #custom-context-menu {
            display: none; position: fixed; background: rgba(231, 76, 60, 0.95); color: white; padding: 10px 20px; 
            border-radius: 5px; font-size: 0.9rem; z-index: 10000; pointer-events: none;
        }
        #screenshot-blocker { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: black; z-index: 10000; justify-content: center; align-items: center; 
            flex-direction: column; text-align: center; 
        }
        #screenshot-blocker h1 { color: #e74c3c; font-size: 2rem; }

        /* MODO HORIZONTAL (LANDSCAPE) */
        @media (orientation: landscape) and (max-height: 600px) {
            .top-bar, .bottom-bar, .pagination, .nav-btn { opacity: 0; pointer-events: none; }
            .close-btn { 
                position: fixed; top: 10px; right: 10px; opacity: 1; pointer-events: auto; z-index: 30;
                width: 35px; height: 35px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center;
            }
            .close-btn span { display: none; }
            .close-btn::after { content: "×"; font-size: 1.5rem; }
        }

    </style>
</head>
<body oncontextmenu="return false;">

    <div id="custom-context-menu">⛔ Prohibido Copiar - Contacto: 0963036594</div>
    <div id="screenshot-blocker"><h1>⛔ ALERTA</h1><p>Captura no permitida.</p></div>

    <div class="top-bar">
        <div class="project-title" id="project-name">Cargando...</div>
        <a href="index.html" class="close-btn"><span>VOLVER</span></a>
    </div>

    <div class="nav-btn prev" onclick="scrollSlide(-1)">&#10094;</div>
    <div class="nav-btn next" onclick="scrollSlide(1)">&#10095;</div>

    <div class="gallery-track" id="track">
        </div>

    <div class="pagination" id="pagination"></div>

    <div class="bottom-bar">
        <div class="zoom-btn" onclick="zoom(-0.25)">－</div>
        <div class="zoom-btn" onclick="resetZoom()">⟲</div>
        <div class="zoom-btn" onclick="zoom(0.25)">＋</div>
    </div>

    <script>
        // CONFIGURACIÓN DE LA BASE DE DATOS DE IMÁGENES (VERIFICADA)
        const db = {
            'science': { title: 'Ilustración Científica', images: ['cangrejo1.jpg', 'caracol.jpg', 'tipula.jpg'] },
            'curativa': { 
                title: 'Curativa Cosmética', 
                images: [
                    'curativa.png', 'desodorante.png', 'balsamo.png', 
                    'Logonegativo.png', 'logousonormal.png', 
                    'marca.jpg', 'marca2.jpg', 'marca3.jpg', 'marca4.jpg', 'marca5.jpg', 'marca6.jpg'
                ] 
            },
            'cultura': { 
                title: 'Cultura Saraguro', 
                images: [
                    'Saraguro1.jpg', 'Saraguro2.jpg', 'Saraguro3.jpg', 'Saraguro4.jpg'
                ] 
            },
            'finca': { title: 'Finca Pindaca', images: ['finca.jpeg'] },
            'tiny': { 
                title: 'Tiny Melts', 
                images: [
                    'tinimeltslogo.png', 'tinymeltsbrandboard.png', 'tinymeltslogoalternativa.png'
                ] 
            },
            'flyer': { 
                title: 'Diseño Promocional', 
                images: [
                    '5elementos.jpg', 
                    'talleresvacacionales.jpg'
                ]
            },
            'encuentros': { 
                title: 'Los Encuentros NET', 
                images: [
                    'losencuentros.png'
                ]
            },
            'web': { // NUEVO: Placeholder para Desarrollo Web Estratégico
                title: 'Desarrollo Web Estratégico', 
                images: [
                    // Coloca aquí los nombres de tus proyectos web (ej: 'landingpage_ejemplo1.jpg')
                    'placeholder_web.jpg' 
                ]
            }
        };

        // VARIABLES Y CÓDIGO DE INICIALIZACIÓN (NO MODIFICADO)
        let currentSlide = 0;
        let currentZoom = 1;
        const track = document.getElementById('track');
        const pagination = document.getElementById('pagination');
        const projectNameElement = document.getElementById('project-name');
        let totalSlides = 0;
        let images = [];

        function getProjectId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

        function loadGallery() {
            const projectId = getProjectId();
            const project = db[projectId];

            if (!project) {
                projectNameElement.textContent = 'Error: Proyecto no encontrado';
                return;
            }

            projectNameElement.textContent = project.title;
            images = project.images;
            totalSlides = images.length;
            track.innerHTML = '';
            pagination.innerHTML = '';

            images.forEach((imgSrc, index) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                // Ruta corregida: usa solo el nombre del archivo
                slide.innerHTML = `<img src="${imgSrc}" alt="${project.title} - Imagen ${index + 1}" id="img-${index}">`;
                
                track.appendChild(slide);

                const dot = document.createElement('div');
                dot.className = 'dot';
                pagination.appendChild(dot);
            });

            updateSlideDisplay(0);
        }

        function updateSlideDisplay(index) {
            currentSlide = index;
            resetZoom();
            const scrollPos = track.clientWidth * index;
            track.scrollTo({ left: scrollPos, behavior: 'smooth' });

            document.querySelectorAll('.dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }

        function scrollSlide(direction) {
            let newIndex = currentSlide + direction;
            if (newIndex < 0) {
                newIndex = totalSlides - 1;
            } else if (newIndex >= totalSlides) {
                newIndex = 0;
            }
            updateSlideDisplay(newIndex);
        }

        function zoom(factor) {
            const newZoom = currentZoom + factor;
            currentZoom = Math.max(1, Math.min(3, newZoom)); 
            
            const imgElement = document.getElementById(`img-${currentSlide}`);
            if (imgElement) {
                imgElement.style.transform = `scale(${currentZoom})`;
            }
        }

        function resetZoom() {
            currentZoom = 1;
            const imgElement = document.getElementById(`img-${currentSlide}`);
            if (imgElement) {
                imgElement.style.transform = `scale(1)`;
            }
        }

        // Event Listeners
        let scrollTimeout;
        track.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                const center = track.scrollLeft + (track.clientWidth / 2);
                const newIndex = Math.floor(center / track.clientWidth);
                if (newIndex !== currentSlide) {
                    updateSlideDisplay(newIndex);
                }
            }, 100); 
        });
        
        function blockScreenshot() {
            const blocker = document.getElementById('screenshot-blocker');
            blocker.style.display = 'flex';
            setTimeout(() => { blocker.style.display = 'none'; }, 1000);
        }

        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            const customMenu = document.getElementById('custom-context-menu');
            customMenu.style.display = 'block';
            customMenu.style.left = `${e.clientX + 5}px`;
            customMenu.style.top = `${e.clientY + 5}px`;
            setTimeout(() => { customMenu.style.display = 'none'; }, 2000);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                scrollSlide(-1);
            } else if (e.key === 'ArrowRight') {
                scrollSlide(1);
            }
        });

        document.addEventListener('DOMContentLoaded', loadGallery);

    </script>
</body>
</html>